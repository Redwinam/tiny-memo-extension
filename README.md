# 简易笔记收藏家 (Tiny Memo Extension)

这是一个简单的浏览器插件，用于快速收集网页上选中的简短文本片段，并将它们追加到一个 Markdown 格式的列表中。

## 功能

- 通过右键菜单快速添加选中内容到笔记列表。
- **通过可配置的键盘快捷键（默认为 Alt+Q / MacCtrl+Q，可自定义）快速添加选中内容到笔记列表。**
- 在插件弹窗中查看所有收集到的笔记。
- 一键将所有笔记复制为 Markdown 格式到剪贴板。
- 一键清空所有已收集的笔记。
- **新增：TTS 语音功能，可朗读选中的文本。**

## 如何使用

1.  **加载插件到浏览器**：
    - 打开 Chrome (或 Edge 等 Chromium 内核浏览器)。
    - 在地址栏输入 `chrome://extensions` 并回车。
    - 确保右上角的 "开发者模式 (Developer mode)" 已开启。
    - 点击 "加载已解压的扩展程序 (Load unpacked)"。
    - 选择包含本插件文件的目录。
    - **首次加载或更新后，浏览器可能会提示您插件请求新的权限 (如"读取您在所有网站上的数据"用于快捷键功能)，请允许。**
2.  **配置快捷键 (可选但推荐)**:
    - 在 `chrome://extensions` 页面，点击左上角的汉堡菜单（三条横线）。
    - 选择"键盘快捷键 (Keyboard shortcuts)"。
    - 找到"简易笔记收藏家"，您会看到名为"通过快捷键将选中内容添加到笔记"的命令。
    - 点击编辑按钮，设置您喜欢的快捷键组合 (例如 `Command+G` 或 `Ctrl+G`)。
3.  **收集笔记**：
    - **方式一 (右键菜单)**：
      - 在任何网页上选中您想要记录的文本。
      - 右键点击选中的文本。
      - 从上下文菜单中选择 "添加到我的简易笔记"。
    - **方式二 (快捷键)**：
      - 在任何网页上选中您想要记录的文本。
      - 按下您配置的快捷键。
    - **方式三 (内联按钮)**：
      - 在网页上选中文本后，会自动在选区附近显示按钮。
      - 点击"添加到笔记"按钮将文本添加到笔记列表。
      - 点击"播放语音"按钮可以使用 TTS 服务朗读选中文本。
4.  **查看和导出笔记**：
    - 点击浏览器工具栏上的插件图标（您可能需要固定它以便快速访问）。
    - 弹窗会显示所有已收集的笔记。
    - 点击 "复制为 Markdown" 按钮，即可将所有笔记以 Markdown 列表的形式复制到剪贴板。
    - 点击 "清空笔记" 按钮，可以删除所有已存储的笔记。
5.  **使用 TTS 功能**：
    - 在网页上选择文本时，会出现"播放语音"按钮，点击即可朗读选中内容。
    - 在插件弹窗中，可以选择不同的 TTS 语音（例如不同语言的发音人）。
    - **注意**：TTS 功能需要本地运行 TTS 服务，默认端口为 5020。

## TTS 服务配置

TTS 功能需要在本地运行服务，默认配置：

- 服务地址: `http://localhost:5020`
- API 端点: `/api/tts` (文本转语音), `/api/voices` (获取可用语音)
- 如需修改服务地址，请修改 background.js 中相关配置

## 文件结构

- `manifest.json`: 插件的清单文件，定义了插件的元数据、权限 (`contextMenus`, `storage`, `scripting`, `commands`)、主机权限 (`<all_urls>`) 和主要组件。
- `background.js`: 后台服务工作线程，处理右键菜单、快捷键命令和文本捕获逻辑。
- `popup.html`: 插件弹窗的 HTML 结构。
- `popup.js`: 插件弹窗的 JavaScript 逻辑，负责显示笔记、复制和清空操作。
- `content_script.js`: 在快捷键触发时注入到活动页面，用于获取选中的文本。
- `inline_button_handler.js`: 处理网页内选中文本时显示的按钮，包括添加笔记和 TTS 功能。
- `icons/`: 存放插件图标的目录 (icon16.png, icon48.png, icon128.png)。

## 开发

本插件使用纯 JavaScript、HTML 和 CSS 构建，遵循 Chrome Manifest V3 规范。

---

祝您使用愉快！
